(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{371:function(v,_,t){"use strict";t.r(_);var a=t(45),s=Object(a.a)({},(function(){var v=this,_=v.$createElement,t=v._self._c||_;return t("ContentSlotsDistributor",{attrs:{"slot-key":v.$parent.slotKey}},[t("h1",{attrs:{id:"前端监控方案"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#前端监控方案"}},[v._v("#")]),v._v(" 前端监控方案")]),v._v(" "),t("p",[v._v("整体运转链路大概如下：\n应用程序收集数据 --\x3e 数据上报 --\x3e 中台转发 --\x3e ELK/... --\x3e GUI")]),v._v(" "),t("h2",{attrs:{id:"收集、上报数据"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#收集、上报数据"}},[v._v("#")]),v._v(" 收集、上报数据")]),v._v(" "),t("h3",{attrs:{id:"收集方式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#收集方式"}},[v._v("#")]),v._v(" 收集方式")]),v._v(" "),t("p",[v._v("为了通用性与易用性，采用cdn or npm形式提供一个含有（错误收集、错误上报、性能监控、用户行为跟踪）的sdk。")]),v._v(" "),t("ol",[t("li",[v._v("自动收集（通过sdk注入，进行无艮埋点）")]),v._v(" "),t("li",[v._v("手动上报（业务侧使用sdk-hook上报业务数据）")])]),v._v(" "),t("h3",{attrs:{id:"数据内容"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#数据内容"}},[v._v("#")]),v._v(" 数据内容")]),v._v(" "),t("p",[t("strong",[v._v("指标数据")])]),v._v(" "),t("ol",[t("li",[v._v("PV/UV")]),v._v(" "),t("li",[v._v("用户在每一个页面的停留时间")]),v._v(" "),t("li",[v._v("用户通过什么入口来访问该网页")]),v._v(" "),t("li",[v._v("用户在相应的页面中触发的行为")]),v._v(" "),t("li",[v._v("...\n"),t("strong",[v._v("异常监控")])]),v._v(" "),t("li",[v._v("javascript运行异常\na: 接口错误\nb: 代码错误\nc: unhandledrejection")]),v._v(" "),t("li",[v._v("静态资源缺失\n"),t("ol",[t("li",[v._v("css")]),v._v(" "),t("li",[v._v("img")]),v._v(" "),t("li",[v._v("...")])])])]),v._v(" "),t("p",[t("strong",[v._v("性能监控")])]),v._v(" "),t("ol",[t("li",[v._v("首屏加载时间")]),v._v(" "),t("li",[v._v("白屏时间")]),v._v(" "),t("li",[v._v("http等请求的响应时间")]),v._v(" "),t("li",[v._v("静态资源整体下载时间")]),v._v(" "),t("li",[v._v("页面渲染时间")]),v._v(" "),t("li",[v._v("页面交互动画完成时间")]),v._v(" "),t("li",[v._v("。。。")])]),v._v(" "),t("h2",{attrs:{id:"接收、转发数据"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#接收、转发数据"}},[v._v("#")]),v._v(" 接收、转发数据")]),v._v(" "),t("p",[t("strong",[v._v("node服务")])]),v._v(" "),t("h2",{attrs:{id:"gui监控平台"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#gui监控平台"}},[v._v("#")]),v._v(" GUI监控平台")]),v._v(" "),t("h2",{attrs:{id:"现有资源"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#现有资源"}},[v._v("#")]),v._v(" 现有资源")]),v._v(" "),t("p",[t("strong",[v._v("@gaoding/gd-tracker")]),v._v("\nweb埋点sdk。基于dom事件进行用户行为收集。\n优点：内置vue指令，抽象出标准数据格式进行上报\n缺点：与业务有强耦合度，没有通用性\n"),t("strong",[v._v("@gaoding/wind-tracker")]),v._v("\n小程序埋点。\n"),t("strong",[v._v("sentry")]),v._v("\n优点：对js代码执行异常有较好堆栈追踪策略\n缺点：快速排查错误的其他信息没有收集，（设备信息、运行环境、用户信息、操作流程、情景复现）")]),v._v(" "),t("h2",{attrs:{id:"我们需要做的"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#我们需要做的"}},[v._v("#")]),v._v(" 我们需要做的")]),v._v(" "),t("p",[v._v("思考：如何有效、快速追踪线上问题。\n结论：问题发生时，需要提供为什么发生（发生的过程，包含环境、条件、流程），以及发生之后影响了什么（用户、视图、逻辑）")]),v._v(" "),t("h3",{attrs:{id:"有效"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#有效"}},[v._v("#")]),v._v(" 有效")]),v._v(" "),t("p",[t("strong",[v._v("代码静态检查")])]),v._v(" "),t("ol",[t("li",[v._v("codereview")]),v._v(" "),t("li",[v._v("eslint + husky")]),v._v(" "),t("li",[v._v("静态代码分析工具")]),v._v(" "),t("li",[v._v("程序指标监控\n"),t("strong",[v._v("提供错误场景")])]),v._v(" "),t("li",[v._v("sourceMap 复现错误代码堆栈")]),v._v(" "),t("li",[v._v("异常操作行为追踪\na: router\nb: data\nc: http\ne: dom\nf: event")]),v._v(" "),t("li",[v._v("利用操作场景 + 代码资源进行场景重现")])]),v._v(" "),t("h3",{attrs:{id:"快速"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#快速"}},[v._v("#")]),v._v(" 快速")]),v._v(" "),t("p",[t("strong",[v._v("报警通知")])]),v._v(" "),t("ol",[t("li",[v._v("钉钉")]),v._v(" "),t("li",[v._v("邮件")])]),v._v(" "),t("h2",{attrs:{id:"场景复现功能"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#场景复现功能"}},[v._v("#")]),v._v(" 场景复现功能")]),v._v(" "),t("ol",[t("li",[v._v("所处环境、设备")]),v._v(" "),t("li",[v._v("当时的页面数据、dom结构")]),v._v(" "),t("li")])])}),[],!1,null,null,null);_.default=s.exports}}]);